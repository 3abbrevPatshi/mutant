# encoding: utf-8

module Mutant

  # Set of nodes that cannot be on the LHS of an assignment
  NOT_ASSIGNABLE = [
    :int, :float, :str, :dstr, :class, :module, :self
  ].to_set.freeze

  # Set of op-assign types
  OP_ASSIGN = [
    :or_asgn, :and_asgn, :op_asgn
  ].to_set.freeze

  # Set of node types that are not valid when emitted standalone
  NOT_STANDALONE = [:splat, :restarg, :block_pass].to_set.freeze

  # Operators ruby implementeds as methods
  METHOD_OPERATORS = %w(
    <=> === []= [] <= >= == !~ != =~ <<
    >> ** * % / | ^ & < > + - ~@ +@ -@ !
  ).map(&:to_sym).to_set.freeze

  INDEX_OPERATORS = [:[], :[]=].to_set.freeze

  UNARY_METHOD_OPERATORS = %w(
    ~@ +@ -@ !
  ).map(&:to_sym).to_set.freeze

  BINARY_METHOD_OPERATORS = (
    METHOD_OPERATORS - (INDEX_OPERATORS + UNARY_METHOD_OPERATORS)
  ).to_set.freeze

  OPERATOR_METHODS = (
    METHOD_OPERATORS + INDEX_OPERATORS + UNARY_METHOD_OPERATORS
  ).to_set.freeze

  # Nodes that are NOT handled by mutant.
  #
  # not - 1.8 only, mutant does not support 1.8
  #
  NODE_BLACKLIST = %w(
    not
  ).map(&:to_sym).freeze

  # Nodes that are NOT generated by parser but used by mutant / unparser.
  NODE_EXTRA = %w(
    empty
  ).map(&:to_sym).freeze

  NODE_TYPES = ((Parser::Meta::NODE_TYPES + NODE_EXTRA) - NODE_BLACKLIST).to_set.freeze

end # Mutant
